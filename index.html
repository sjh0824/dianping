<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>Hello APP</title>
    <link rel="stylesheet" type="text/css" href="./css/api.css" />
    <link rel="stylesheet" type="text/css" href="./css/common.css" />

    <style>

     /* å¤´éƒ¨æ ·å¼ */
     #firstHeader {background-color: #FF8400;}
     .topbar {/*background: #FF8400;*/ height:50px; border-bottom: 1px solid #DDDFE3;}
     .topbar_title {display: inline-block;font-size: 20px; line-height: 50px;padding-left: 12px;}
     .hr01, .hr02 {height: 28px;}
     .headerico {padding: 11px 15px 11px 15px;}
     .headericohover {background: #DADDE0;}
     .fr{float: right;}
     .fl{float: left;}

     /*ç¬¬ä¸€å¤´éƒ¨*/
     #logo {padding: 11px 0 0 10px;height: 28px;}
     #citylist {height: 50px; line-height: 50px;padding-left: 15px; font-size: 18px; color: #fff;}
     .citylistarrow {vertical-align: top; width: 20px; padding-top: 15px;}
    .search {height: 34px;line-height: 34px; padding-left: 10px; border-radius: 30px;  margin-top: 8px; position: absolute; left: 20px; right: 60px;font-size: 14px;}
    .search img {vertical-align: top; width: 20px; padding-top: 7px;padding-right: 10px;}
    .firstSearch {left: 90px;right: 60px;background-color: #FA6604;color: #FDC29B;}

     /* ç¬¬äºŒå¤´éƒ¨ */
     #topbar_refresh {width: 40px;padding:5px 10px;}
     .whitebar {background-color: #fcfcfc;}
     #whitecity {height: 50px; line-height: 50px;padding-left: 15px; font-size: 18px;color: #FF8400;}
    .secCitylistarrow {vertical-align: top; width: 15px; padding-top: 18px;padding-left: 5px;}
    .secSearch {left: 90px;right: 15px;background-color: #E8E8E8;color: #999;}

    /* ç¬¬ä¸‰å¤´éƒ¨ */
    .swipepic {padding: 5px 15px 2px 15px;height: 23px;}
    .swipe div {font-size: 12px; text-align: center;color: #999;}
    .thrSearch {left: 15px;right: 60px;background-color: #E8E8E8;color: #999;}

     /* å¤´éƒ¨åˆ‡æ¢æ ·å¼ */
     .titlebar {display: none;}
     .activebar {display: block;}

     /* åº•éƒ¨åˆ‡æ¢æŒ‰é’®æ ·å¼ */
     ul {display: -webkit-box; display: -webkit-flex; display: flex; }
     #footer {height: 61px; line-height: 60px; background-color: #FAFAFA;border-top: 1px solid #FAFAFA; }
     #footer li{-webkit-box-flex: 1; -webkit-flex: 1; flex:1; height: 60px;}

     /* é€‰é¡¹å¡æ ·å¼ */
     .scrollbar {display: -webkit-box;display: -webkit-flex; text-align: center; height: 40px; line-height: 40px;background: #EBECF0;font-size: 12px;position: relative;}
     .col1 {-webkit-box-flex:1;-webkit-flex: 1;flex:1;color: #909090;}
     .indexbar {position: absolute;/*background: #0fc;*/width: 50%;height: 5px;left: 0px;bottom: 0px;-webkit-transition: 300ms;}
     .redbox {background: #DB4646;width: 40px;height: 5px;position: relative;left: auto;right: auto; margin-left: auto; margin-right: auto;}

     /********************/
     /* åº•éƒ¨æŒ‰é’®åŸå§‹æ ·å¼ */
     /********************/
     .bbtn01 {background: url(./image/main_index_home_normal.png) no-repeat center 4px; }
     .bbtn02 {background: url(./image/main_index_tuan_normal.png) no-repeat center 4px; }
     .bbtn03 {background: url(./image/main_index_search_normal.png) no-repeat center 4px; }
     .bbtn04 {background: url(./image/main_index_my_normal.png) no-repeat center 4px; }
     .bottom_btn {width: 99%; height: 43px;padding-top: 18px;background-position-y: 4px; background-size: 30px;  font-size: 12px; color: #A5A5A5;}

     /* åº•éƒ¨æŒ‰é’®æ¿€æ´»æ ·å¼ */
     .activebtn0 {background: url(./image/main_index_home_pressed.png) no-repeat center 4px; }
     .activebtn1 {background: url(./image/main_index_tuan_pressed.png) no-repeat center 4px; }
     .activebtn2 {background: url(./image/main_index_search_pressed.png) no-repeat center 4px; }
     .activebtn3 {background: url(./image/main_index_my_pressed.png) no-repeat center 4px; }
     .activebtn {color:#FF7419; background-size: 30px; }
     .bottomhover {background-color: #46494B;}

     /* æœ¬åœ°åˆ·æ–°å›¾æ ‡ */
     #localrefresh {display:none;float: right; width: 40px; padding: 5px 10px;}

    </style>
  </head>
  <body>
    <div id="wrap">
      <!-- ç¬¬ä¸€å¤´éƒ¨ -->
      <div id="firstHeader" class="titlebar activebar">
        <div class="topbar">
          <div class="citylist fl" id="citylist" tapmode="" onclick="openCitylist()">åŒ—äº¬<img src="./image/title_home_arrow_down_normal.png" alt="" class="citylistarrow"></div>
          <div class="search firstSearch"  tapmode="" onclick="openSearch()">
              <img src="./image/ic_home_search.png" alt="">è¾“å…¥å•†æˆ·åã€åœ°ç‚¹
          </div>
          <img src="./image/send_msg.png" alt="" class="fr headerico hr01"  tapmode="" onclick="openNewWindow('message')">
          <!-- <img src="./image/topbar_search.png" alt="" class="fr headerico hr02"  tapmode="headericohover" onclick="openNewWindow('search')"> -->
        </div>
      </div>

      <!-- ç¬¬äºŒå¤´éƒ¨ -->
      <div id="secHeader" class="titlebar">
        <div class="topbar whitebar">
          <div class="citylist fl" id="whitecity"  tapmode="" onclick="openCitylist()">åŒ—äº¬<img src="./image/title_arrow_down_normal.png" alt="" class="secCitylistarrow"></div>
          <div class="search secSearch"  tapmode="" onclick="openSearch()">
              <img src="./image/navibar_search_icon_search.png" alt="">æœç´¢å›¢è´­...
          </div>
          <!-- <img src="./image/local_icon_refresh.png" alt="" class="fr headerico" id="topbar_refresh"   tapmode="headericohover" onclick="emptyopt()">
          <img src="./image/topbar_search.png" alt="" class="fr headerico hr02"  tapmode="headericohover" onclick="openNewWindow('search')"> -->

        </div>
      </div>

      <!-- ç¬¬ä¸‰å¤´éƒ¨ -->
      <div id="thridHeader" class="titlebar">
        <div class="topbar whitebar">
          <div class="search thrSearch"  tapmode="" onclick="openSearch()">
              <img src="./image/navibar_search_icon_search.png" alt="">è¾“å…¥å•†æˆ·åã€åœ°ç‚¹
          </div>
          <div class="swipe fr" tapmode="headericohover" onclick="openScan()">
              <img src="./image/navibar_icon_qr.png" alt="" class="swipepic">
              <div>æ‰«ä¸€æ‰«</div>
          </div>
        </div>
      </div>


      <!-- ç¬¬å››å¤´éƒ¨ -->
      <div id="fortheader" class="titlebar">
        <div class="aui-timeline">
            <div class="aui-timeline-item-header">2017å¹´1æœˆ8æ—¥</div>
            <div class="aui-timeline-item">
                <div class="aui-timeline-item-label aui-bg-info text-light">NO.1</div>
                <div class="aui-timeline-item-inner">
                    <div class="aui-card-list">
                        <div class="aui-card-list-header aui-border-b">
                            <div>æ—¶é—´è½´å›æ¥äº†</div>
                            <i class="aui-iconfont aui-icon-star aui-text-danger"></i>
                        </div>
                        <div class="aui-card-list-content-padded">
                            æ—¶é—´è½´é‡æ–°å›å½’äº†ï¼Œè·Ÿå¡ç‰‡åˆ—è¡¨å¸ƒå±€ç»“åˆå¯ä»¥å®Œæˆä¸°å¯Œçš„å¸ƒå±€æ ·å¼
                            <img src="../image/l1.png">
                        </div>
                        <div class="aui-card-list-footer aui-border-t aui-font-size-12">
                            <div><i class="aui-iconfont aui-icon-note aui-font-size-14"></i> 666</div>
                            <div><i class="aui-iconfont aui-icon-laud aui-font-size-14"></i> 888</div>
                            <div><i class="aui-iconfont aui-icon-star aui-font-size-14"></i> 888</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="aui-timeline-item">
                <div class="aui-timeline-item-label-icon aui-bg-danger">
                    <i class="aui-iconfont aui-icon-like text-light"></i>
                </div>
                <div class="aui-timeline-item-inner">
                    <div class="aui-card-list">
                        <div class="aui-card-list-content-padded">
                            AUIä¸€ç›´åœ¨åŠªåŠ›ï¼Œå¹¶ä¼šæŒä¹…çš„æ›´æ–°ä¸‹å»ï¼Œæ›´æ–¹ä¾¿å¿«é€Ÿçš„å®Œæˆå¸ƒå±€ã€‚æ„Ÿè°¢ä¸€è·¯æœ‰å¤§å®¶çš„é™ªä¼´ï¼ï¼ï¼ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹
                        </div>
                    </div>
                </div>
            </div>
            <div class="aui-timeline-item">
                <div class="aui-timeline-item-label aui-bg-warning text-light">NO.2</div>
                <div class="aui-timeline-item-inner">
                    <div class="aui-card-list">
                        <div class="aui-card-list-header aui-border-b">æ›´å¥½çš„ç»„åˆæ¨¡å¼</div>
                        <div class="aui-card-list-content-padded">
                            <div class="aui-row aui-row-padded">
                                <div class="aui-col-xs-4">
                                    <img src="../image/demo1.png" />
                                </div>
                                <div class="aui-col-xs-4">
                                    <img src="../image/demo2.png" />
                                </div>
                                <div class="aui-col-xs-4">
                                    <img src="../image/demo3.png" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="aui-timeline-item">
                <div class="aui-timeline-item-label aui-bg-success text-light">NO.3</div>
                <div class="aui-timeline-item-inner">
                    <div class="aui-card-list">
                        <div class="aui-card-list-header aui-border-b">æ›´å¥½çš„ç»„åˆæ¨¡å¼</div>
                        <div class="aui-card-list-content">
                            <ul class="aui-list aui-media-list aui-list-noborder">
                                <li class="aui-list-item aui-list-item-middle">
                                    <div class="aui-media-list-item-inner">
                                        <div class="aui-list-item-media" style="width: 2.6rem;">
                                            <img src="../image/demo5.png" class="aui-img-round" >
                                        </div>
                                        <div class="aui-list-item-inner aui-list-item-arrow">
                                            <div class="aui-list-item-text">
                                                <div class="aui-list-item-title aui-font-size-14">AUI</div>
                                                <div class="aui-list-item-right">08:00</div>
                                            </div>
                                            <div class="aui-list-item-text">
                                                www.auicss.com
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li class="aui-list-item aui-list-item-middle">
                                    <div class="aui-media-list-item-inner">
                                        <div class="aui-list-item-media" style="width: 2.6rem;">
                                            <img src="../image/demo1.png" class="aui-img-round">
                                        </div>
                                        <div class="aui-list-item-inner aui-list-item-arrow">
                                            APICloud AUI
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="aui-card-list-footer aui-text-center aui-border-t">
                            æŸ¥çœ‹æ›´å¤š
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </div>

      <div id="main">

      </div>

      <div id="footer">
        <ul>
          <li tapmode="activebtn0 activebtn" onclick="switchframe('first_frame', 0)">
            <a class="bottom_btn bbtn01 weixin activebtn activebtn0">é¦–é¡µ</a>
          </li>

          <li tapmode="activebtn1 activebtn" onclick="switchframe('second_frame', 1)">
            <a class="bottom_btn bbtn02 communicate">å›¢è´­</a>
          </li>

          <li tapmode="activebtn2 activebtn" onclick="switchframe('third_frame', 2)">
            <a class="bottom_btn bbtn03 discover">å‘ç°</a>
          </li>

          <li tapmode="activebtn3 activebtn" onclick="switchframe('forth_frame', 3)">
            <a class="bottom_btn bbtn04 home">æˆ‘çš„</a>
          </li>
        </ul>
      </div>
    </div>
  </body>
  <script type="text/javascript" src="./script/api.js"></script>
  <script type="text/javascript">
   var firstHeader = $api.byId('firstHeader');
   var secHeader = $api.byId('secHeader');
   var thirdHeader = $api.byId('thridHeader');
   var fortheader = $api.byId('fortheader');
   var firstHeaderOffset;

   var main = $api.byId('main');
   var mainPos = $api.offset(main);

   var footer = $api.byId('footer');
   var footerPos = $api.offset(footer);

   var gFrameIndex;

   function emptyopt () {}

   function openNewWindow(type)
   {
     api.openWin({
       name: type,
       url: './html/'+type+'.html',
       pageParam: {},
       bounces: false,
       opaque: false
     });
   }

   function openScan()
   {
     // api.openWin({
     //   name: 'scan',
     //   url: './html/scan.html',
     //   bounces: false
     // });
     var obj = api.require('scanner');
      obj.open(function(ret,err) {
          api.alert({
              title: 'æ‰«æç»“æœ',
              msg: ret.msg
          });
      });
   }
   function openSearch()
    {
      api.openWin({
      name: 'search',
      url: './html/search.html',
      bounces: false,
      delay:200
      });
    }

    function openCitylist() {
      api.openWin({
        name: 'citylist',
        url: './html/citylist_header.html',
        bounces: false,
        delay:200
      });
    }
   // éšæ„åˆ‡æ¢æŒ‰é’®
   function randomSwitchBtn(name, index)
   {
     var lis = $api.domAll('.bottom_btn');
     var i = 0, len = lis.length;
     var curLi = lis[index];

    for(i; i<len; i++){
       var thisLi = lis[i];
       if(thisLi === curLi){
           $api.addCls(thisLi,'activebtn');
           $api.addCls(thisLi,'activebtn'+index);
           continue;
       }else{
           if($api.hasCls(thisLi,'activebtn')){
               $api.removeCls(thisLi,'activebtn');
               $api.removeCls(thisLi,'activebtn'+i);
           }
       }
    }

        // åˆ‡æ¢å¤´éƒ¨
        var lis = $api.domAll('.titlebar');
        var i = 0, len = lis.length;
        var curLi = lis[index];

        for(i; i<len; i++){
            var thisLi = lis[i];
            if(thisLi === curLi){
                $api.addCls(thisLi,'activebar');
                $api.addCls(thisLi,'activebar'+index);
                continue;
            }else{
                if($api.hasCls(thisLi,'activebar')){
                        $api.removeCls(thisLi,'activebar');
                        $api.removeCls(thisLi,'activebar'+i);
                    }
                }
            }
    }

    // éšè—æ‰€æœ‰çš„ä¸€çº§frame
    function hideAllFrame()
    {
        api.setFrameAttr({
            name: 'first_frame',
            hidden:true
        });
        api.setFrameAttr({
            name: 'second_frame',
            hidden:true
        });
        api.setFrameAttr({
            name: 'third_frame',
            hidden:true
        });
        api.setFrameAttr({
            name: 'forth_frame',
            hidden:true
        });
    }

    // è‡ªå·±ä¿®å¤iosæ˜¾ç¤ºframeçš„æ—¶å€™bug
    // iosè‡ªå·±ä¸»åŠ¨éšè—åï¼Œå†openå°±ä¸æ˜¾ç¤ºäº†
    function showgroup(type)
    {
        api.setFrameGroupAttr({
            name: type + 'group',
            hidden:false
        });
    }

    // å±•ç¤ºæŒ‡å®šçš„frame
    function showframe(type)
    {
        api.setFrameAttr({
            name: type,
            hidden:false
        });
    }

    // æ‰“å¼€ç¬¬ä¸€ä¸ªã€ç¬¬ä¸‰ä¸ªframe
    function openframeinstance( frame, marginTop, isBounce)
    {
        api.openFrame ({
            name: frame,
            url: './html/' + frame +'/' + frame + '_body.html',
            rect:{
                x:0,
                y:marginTop,
                w:'auto',
                h:api.frameHeight - marginTop - footerPos.h
            },
            pageParam: {name: 'test'},
            // bounces: isBounce,
            bounces: false,
            vScrollBarEnabled:false,
            hScrollBarEnabled:false,
            delay:200
        });
    }

   // ç§»åŠ¨æ»‘åŠ¨å—
   function sliderbarCallback(id, num) {

     // å¾—åˆ°èƒŒæ™¯å…ƒç´ çš„å®½åº¦
     // var width=parseInt(window.getComputedStyle($api.byId('matchwidth'),null).width);
     var width = parseInt(api.frameWidth / 2);
     // api.alert({msg:width});
     if(num!=0){
       num=width;
     }
     // ç§»åŠ¨èƒŒæ™¯å…ƒç´ çš„å®½åº¦  åœ¨index.htmlä¸èƒ½è·å¾— forth_frame.htmlä¸Šé¢çš„domï¼Œè™½ç„¶æ˜¯åœ¨åŒä¸€ä¸ªæ‰‹æœºå±å¹•ä¸Š
     $api.css($api.byId(id),"-webkit-transform:translate(" + num + "px,0)");
   }

    // ===================================
    // å“åº”åº•éƒ¨æŒ‰é’®çš„åˆ‡æ¢frame
    // ===================================
    function switchframe(type, _index)
    {
        if ( _index === gFrameIndex ) {
          return 0;
        } else {
          gFrameIndex = _index;
        }

        switch(type)
        {
            case 'first_frame':
                randomSwitchBtn('first_frame', 0);
                hideAllFrame();
                openframeinstance('first_frame', firstHeaderOffset.h, true);
                // showframe('first_frame');
            break;
            case 'second_frame':
                randomSwitchBtn('second_frame', 1);
                hideAllFrame();
                openframeinstance('second_frame', firstHeaderOffset.h, true);
                // showgroup('hot');
            break;
            case 'third_frame':
                randomSwitchBtn('third_frame', 2);
                hideAllFrame();
                openframeinstance('third_frame', firstHeaderOffset.h, false);
                // showframe('third_frame');
            break;
            case 'forth_frame':
                randomSwitchBtn('forth_frame', 3);
                hideAllFrame();
                openframeinstance('forth_frame', 0, false);
                // showgroup('forth_frame');
            break;
            default:
            break;
        }

    }

    // å®Œæˆé¦–é¡µåˆå§‹åŒ–
    apiready = function(){
        // è®¾ç½®ios7çš„æ ‡é¢˜æ å­—ä½“å˜äº®ï¼Œå…¨å±€ç”¨ä¸€ä¸ªå°±è¡Œäº†
        api.setStatusBarStyle({
          style: 'dark'
        });

        firstHeader = $api.byId('firstHeader');
        secHeader = $api.byId('secHeader');
        thirdHeader = $api.byId('thridHeader');
        fortheader = $api.byId('fortheader');
        $api.fixStatusBar(firstHeader);
        $api.fixStatusBar(secHeader);
        $api.fixStatusBar(thirdHeader);
        $api.fixStatusBar(fortheader);

        firstHeaderOffset = $api.offset(firstHeader);

        var main = $api.byId('main');
        var mainPos = $api.offset(main);

        var footer = $api.byId('footer');
        var footerPos = $api.offset(footer);
        gFrameIndex = 0;

        // ç¬¬ä¸€æ¬¡è¿›å…¥æ‰“å¼€ first_frame body
        api.openFrame ({
            name: 'first_frame',
            url: './html/first_frame/first_frame_body.html',
            rect:{
            x:0,
            y:firstHeaderOffset.h,
            w:'auto',
            h:api.frameHeight-firstHeaderOffset.h -footerPos.h
            },
            bounces: false,
            opaque: false
            // vScrollBarEnabled:false,
            // hScrollBarEnabled:false
        });

    };
  </script>
</html>
